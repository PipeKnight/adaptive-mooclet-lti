{% extends "engine/base_mooclet.html" %}
{% load staticfiles %}
{% load django_bootstrap_breadcrumbs %}
{% load custom_tags %}

{% block title %}
Experiment Information and Data
{% endblock title %}

{% block body %}
{% comment %}
<div class="section-context">
	{% if mooclet.type == "explanation" %}
		<p> Interact with explanations-for-answer-MOOClet by viewing data, policy, rating explanations (to be added) </p>
		Answer text: {{answer.text | safe}}
	{% else %}
		No mooclet context provided
	{% endif %}
</div>
{% endcomment %}



<div>
	<h2>Versions of Feedback:</h2>
	<ul>
	{% for version in mooclet.version_set.all %}
		<li><a href="{% url 'engine:version_modify' quiz_id=quiz.pk question_id=question.pk answer_id=answer.pk mooclet_id=mooclet.pk version_id=version.pk %}">Version: {{version | safe}}</a></li>
	{% endfor %}
	<li><i><a href="{% url 'engine:version_create' quiz_id=quiz.pk question_id=question.pk answer_id=answer.pk mooclet_id=mooclet.pk %}">Add new version</a></i></li>
	</ul>
</div>

<div class="section-links">
	<h2> Links </h2>
	<ul>
	{% comment %}
	<li><a href="{% url 'engine:mooclet_simulate_probabilities' quiz_id=quiz.pk question_id=question.pk answer_id=answer.pk mooclet_id=mooclet.pk %}">Get new data</a></li>
	<li><a href="{% url 'engine:mooclet_list_values' quiz_id=quiz.pk question_id=question.pk answer_id=answer.pk mooclet_id=mooclet.pk %}"> View all mooclet data</a></li>
	{% endcomment %}
	<li><a href="{% url 'engine:mooclet_results' quiz_id=quiz.pk question_id=question.pk answer_id=answer.pk mooclet_id=mooclet.pk %}">View Data and Policy Dashboard</a></li>
	<li><a href="{% url 'engine:mooclet_modify_version_values' quiz_id=quiz.pk question_id=question.pk answer_id=answer.pk mooclet_id=mooclet.pk %}">Enter Instructor Judgments about Versions</a></li>
	{% comment %}
	<li><a href="#"> TODO: define new display variable tranformations</a></li>	
	{% endcomment %}

	{% if mooclet.type == "explanation" %}
		
		<p> <a href="{% url 'engine:explanation_list' quiz_id=quiz.pk question_id=answer.question.pk answer_id=answer.pk mooclet_id=mooclet.pk %}">Create/Edit Alternative Versions of Explanation-MOOClets</a></p>
	
	{% endif %}

	</ul>
</div>

<div class="section-mooclet">
	<h2>Advanced Info</h2>
	{% comment %}
	<p>Name: {{mooclet.name}}</p>
	<p>Type: {{mooclet.type}}</p>
	<p>Policy: {{mooclet.policy.name}}</p>
	{% endcomment %}

<form method="post">
    {{mooclet_policy_form}}
    <input type="submit" value="Save" />
</form>
	

</div>

<div>
<h2> Student's View of Question</h2>

<!-- preview quiz -->
<iframe src="{% url 'engine:launch_quiz' quiz_id=quiz.pk %}" height='400px' width='80%'>
</div>

{% comment %}
<div class="section-probabilities">
	{% for version, probability in version_probabilities %}
    	Probability of {{ version | safe }} = {{ probability }} <br>

	{% endfor %}
</div>
{% endcomment %}


{% endblock %}
